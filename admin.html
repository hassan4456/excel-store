<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة التحكم - Excel Store</title>
  <style>
    body { font-family: "Cairo", sans-serif; background: #f2f2f2; padding: 20px; }
    h1 { text-align: center; color: #333; }
    #login { text-align: center; margin-top: 100px; }
    input, button { padding: 10px; margin: 5px; }
    #adminPanel { display: none; }
    .product { background: #fff; padding: 10px; margin: 10px 0; border-radius: 10px; }
  </style>
</head>
<body>

<h1>لوحة التحكم</h1>

<div id="login">
  <p>أدخل كلمة السر للدخول:</p>
  <input type="password" id="password" placeholder="كلمة السر">
  <button onclick="login()">دخول</button>
</div>

<div id="adminPanel">
  <h2>إضافة منتج جديد</h2>
  <input id="name" placeholder="اسم المنتج"><br>
  <input id="price" placeholder="السعر"><br>
  <input id="image" placeholder="رابط الصورة (files/excel1.png)"><br>
  <input id="link" placeholder="رابط التحميل"><br>
  <button onclick="addProduct()">إضافة</button>
  <hr>
  <h2>قائمة المنتجات</h2>
  <div id="products"></div>
</div>

<script>
const PASSWORD = "admin123"; // ← غيّرها بكلمة السر اللي تحبها

function login() {
  const pass = document.getElementById("password").value;
  if (pass === PASSWORD) {
    document.getElementById("login").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    loadProducts();
  } else {
    alert("كلمة السر غير صحيحة");
  }
}

async function loadProducts() {
  const res = await fetch('products.json');
  const data = await res.json();
  const container = document.getElementById("products");
  container.innerHTML = "";
  data.forEach((p, i) => {
    container.innerHTML += `
      <div class='product'>
        <strong>${p.name}</strong><br>
        السعر: ${p.price}<br>
        <button onclick="deleteProduct(${i})">حذف</button>
      </div>
    `;
  });
}

async function addProduct() {
  const name = document.getElementById("name").value;
  const price = document.getElementById("price").value;
  const image = document.getElementById("image").value;
  const link = document.getElementById("link").value;
  const res = await fetch('products.json');
  const data = await res.json();
  data.push({ name, price, image, link });
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'products.json';
  a.click();
  alert("تم إنشاء ملف جديد بالمنتجات المحدّثة — استبدله في GitHub.");
}

function deleteProduct(i) {
  alert("لحذف المنتج، افتح ملف products.json يدويًا وامسح السطر المقابل.");
}
</script>
</body>
</html>
